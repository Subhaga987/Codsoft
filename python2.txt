import nltk
import random
import spacy
from nltk.chat.util import Chat, reflections

# Load spaCy model
nlp = spacy.load("en_core_web_sm")

# Simple conversation pairs for rule-based responses
pairs = [
    [r"my name is (.*)", ["Hello %1, How are you today?"]],
    [r"hi|hey|hello", ["Hello!", "Hi there!", "Hey!"]],
    [r"what is your name?", ["I'm a chatbot, but you can call me Chatty."]],
    [r"how are you?", ["I'm good, how about you?"]],
    [r"quit", ["Goodbye!", "See you later!"]],
]

# Create a chatbot instance
chatbot = Chat(pairs, reflections)

# Function to handle user input
def chat():
    print("Chatbot: Hello! Type 'quit' to exit.")
    while True:
        user_input = input("You: ")
        if user_input.lower() == 'quit':
            print("Chatbot: Goodbye!")
            break
        else:
            response = chatbot.respond(user_input)
            if response:
                print(f"Chatbot: {response}")
            else:
                # Process the input with spaCy for more advanced understanding
                doc = nlp(user_input)
                print(f"Chatbot (Advanced): I heard you say something about {doc.ents}, but I need more training to understand this better.")

# Start the chatbot
chat()
